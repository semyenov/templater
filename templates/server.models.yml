variables:
  - name: "NAME"
    message: "Enter model name:"
    initialValue: "meta"
    defaultValue: ""

  - name: "COMMENT"
    message: "Enter comment:"
    initialValue: "Generated by Templater"
    defaultValue: ""

files:
  - name: "<%- NAME-lower %>/<%- NAME-dot %>.ts"
    content: |
      // <%- COMMENT %>

      import { model } from 'mongoose'
      import { addMongooseTypeOptions, toMongooseSchema, toZodMongooseSchema } from 'mongoose-zod'

      import type { I<%- NAME-capital %> } from '~/types'
      import { I<%- NAME-capital %>Schema, IScope } from '~/types'

      export const I<%- NAME-capital %>MongooseSchema = toMongooseSchema(
        addMongooseTypeOptions(
          toZodMongooseSchema(I<%- NAME-capital %>Schema),
          {
            // TODO: write mongoose-zod schema options
            validateBeforeSave: true,
          }))

      export const I<%- NAME-capital %>Model = model<I<%- NAME-capital %>>(
        IScope.<%- NAME-upper %>,
        I<%- NAME-capital %>MongooseSchema,
      )

  - name: "<%- NAME-lower %>/<%- NAME-capital %>.d.ts"
    content: |
      import { I<%- NAME-capital %> } from '~/types'
