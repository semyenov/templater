variables:
  - name: "NAME"
    message: "Enter model name:"
    initialValue: "meta"
    defaultValue: ""

  - name: "COMMENT"
    message: "Enter comment:"
    initialValue: "Generated by Templater"
    defaultValue: ""

files:
  - name: "{{snakeCase NAME}}/{{dotCase NAME}}.ts"
    content: |
      // {{COMMENT}}

      import { model } from 'mongoose'
      import { addMongooseTypeOptions, toMongooseSchema, toZodMongooseSchema } from 'mongoose-zod'

      import type { I{{capitalCase NAME}} } from '~/types'
      import { I{{capitalCase NAME}}Schema, IScope } from '~/types'

      export const I{{capitalCase NAME}}MongooseSchema = toMongooseSchema(
        addMongooseTypeOptions(
          toZodMongooseSchema(I{{capitalCase NAME}}Schema),
          {
            // TODO: write mongoose-zod schema options
            validateBeforeSave: true,
          }))

      export const I{{capitalCase NAME}}Model = model<I{{capitalCase NAME}}>(
        IScope.{{constantCase NAME}},
        I{{capitalCase NAME}}MongooseSchema,
      )

  - name: "{{snakeCase NAME}}/{{capitalCase NAME}}.d.ts"
    content: |
      import { I{{capitalCase NAME}} } from '~/types'
