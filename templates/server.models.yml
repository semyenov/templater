variables:
  - name: 'NAME'
    message: 'Enter model name:'
    initialValue: 'meta'
    defaultValue: ''

  - name: 'COMMENT'
    message: 'Enter comment:'
    initialValue: 'Generated by Templater'
    defaultValue: ''

files:
  - name: '<%- NAME_lower %>/<%- NAME_dot %>.ts'
    content: |
      // <%- COMMENT %>

      import { model } from 'mongoose'
      import { addMongooseTypeOptions, toMongooseSchema, toZodMongooseSchema } from 'mongoose-zod'

      import type { I<%- NAME_capital %> } from '~/types'
      import { I<%- NAME_capital %>Schema, IScope } from '~/types'

      export const I<%- NAME_capital %>MongooseSchema = toMongooseSchema(
        addMongooseTypeOptions(
          toZodMongooseSchema(I<%- NAME_capital %>Schema),
          {
            // TODO: write mongoose-zod schema options
            validateBeforeSave: true,
          }))

      export const I<%- NAME_capital %>Model = model<I<%- NAME_capital %>>(
        IScope.<%- NAME_upper %>,
        I<%- NAME_capital %>MongooseSchema,
      )

  - name: '<%- NAME_lower %>/<%- NAME_capital %>.d.ts'
    content: |
      import { I<%- NAME_capital %> } from '~/types'
